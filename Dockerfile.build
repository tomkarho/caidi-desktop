FROM node:18-alpine

WORKDIR /app
COPY . .

ARG UNAME=jenkins
ARG UID=1000
ARG GID=1000

RUN groupadd -g $GID -o $UNAME && \
    useradd -m -u $UID -g $GID -o -s /bin/bash $UNAME && \
    chown -R $UID:$GID /app

USER $UNAME

CMD ["sh", "bin/build.sh"]
